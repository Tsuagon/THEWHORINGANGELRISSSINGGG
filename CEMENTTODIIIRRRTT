if not game:IsLoaded() then
	game.Loaded:Wait()
end
getgenv().Reanimation = getgenv().Reanimation or "PermaDeath"


local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/shidemuri/scripts/main/ui_lib.lua"))()


local Pendulum = Library:New("Skidagon Hub")
local UserInputService = game:GetService("UserInputService")
local SettingsTab = Pendulum:NewTab("Settings")
local CreditsTab = Pendulum:NewTab("Credits")
local ScriptsTab = Pendulum:NewTab("Scripts")
local reanimtype = SettingsTab:NewLabel('Reanimation Type: ' .. getgenv().Reanimation)
SettingsTab:NewButton("Toggle Perma Death", "PermaDeath / Simple", function()
	if getgenv().Reanimation == "PermaDeath" then
		getgenv().Reanimation = "Simple"
		getgenv().Fling = 'Right Arm'
		reanimtype.Text = 'Reanimation Type: Simple'
	elseif getgenv().Reanimation == "Simple" then
		getgenv().Reanimation = "PermaDeath"
		getgenv().Fling = 'HumanoidRootPart'
		reanimtype.Text = 'Reanimation Type: PermaDeath'
	end
end, true)

getgenv()._reanimate = loadstring(game:HttpGet('https://raw.githubusercontent.com/shidemuri/coffeeware/main/reanim.lua'))()

local Players = game:GetService("Players")

-- Script Buttons

ScriptsTab:NewSearchBar()

ScriptsTab:NewButton("Sonic", "All other versions don't fling except this one.", function()
	loadstring(game:HttpGetAsync("https://bit.ly/3Cmw7BP"))()
end)

ScriptsTab:NewButton("The World", "Another script for JoJotards.", function()
	loadstring(game:HttpGetAsync("https://raw.githubusercontent.com/Tsuagon/FUCKFAWSWRDFASZFSD/main/ADASAA"))()
end)

ScriptsTab:NewButton("Star Platinum: The World", "Star Platinum, but a little weaker and with a new ability.", function()
	loadstring(game:HttpGetAsync("https://raw.githubusercontent.com/Tsuagon/PLEASE/main/OREGA%20SABOCK"))()
end)

ScriptsTab:NewButton("Star Platinum Over Heaven", "A really fun script for people who have played a jojo game before.", function()
	loadstring(game:HttpGetAsync("https://raw.githubusercontent.com/Tsuagon/chicken-tendderrsss/main/STARPLAT"))()
end)

ScriptsTab:NewButton("Mysterious White Giant Stand", "A basic Stand that just punches things.", function()
	loadstring(game:HttpGetAsync("https://raw.githubusercontent.com/Tsuagon/oorraaaaaa/main/WHO%20WANT%20SOME%20OF%20THIS"))()
end)

ScriptsTab:NewButton("The Emperor", "A simple Stand for the best minor villain in all of JoJo.", function()
	loadstring(game:HttpGetAsync("https://raw.githubusercontent.com/Tsuagon/BUMBUMTHEE/main/RWESAZRWEF3AS"))()
end)

ScriptsTab:NewButton("Darth Vadar", "For the star wars fans.", function()
	loadstring(game:HttpGetAsync("https://bit.ly/3vPlhD8"))()
end)

ScriptsTab:NewButton("Gale Fighter", "Another classic!", function()
	loadstring(game:HttpGetAsync("https://bit.ly/3ClMnTL"))()
end)

ScriptsTab:NewButton("Dark Magic", "If you've played Black Magic you'll love this script.", function()
	loadstring(game:HttpGetAsync("https://bit.ly/3tGWxu2"))()
end)

ScriptsTab:NewButton("Frieza", "The Emperor of the Galaxy himself.", function()
	loadstring(game:HttpGetAsync("https://raw.githubusercontent.com/Tsuagon/FRIEZATWOSTRIKESBACK/main/THEYALLLOOKTHESAME"))()
end)

ScriptsTab:NewButton("Flamethrower", "Terrorism. What else do you want me to say?", function()
	loadstring(game:HttpGetAsync("https://bit.ly/3tIk2TL"))()
end)

ScriptsTab:NewButton("Chara", "knife girl sexy uwu", function()
	loadstring(game:HttpGetAsync("https://bit.ly/3ClNT8p"))()
end)

ScriptsTab:NewButton("Video Powers", "Infamous Second Son reference", function()
	loadstring(game:HttpGetAsync("https://bit.ly/3vSa70n"))()
end)

ScriptsTab:NewButton("Gaster", "man who speaks in handjobs", function()
	loadstring(game:HttpGetAsync("https://bit.ly/3CloY4M"))()
end)

ScriptsTab:NewButton("Sans V2", "Don't read the undertail R34 comic.", function()
	loadstring(game:HttpGetAsync("https://bit.ly/3hNYMGt"))()
end)

local anim = Pendulum:NewTab('Animation ID Player')
local id = anim:NewTextBar('Animation ID', 'Enter the animation ID you want to play')
anim:NewButton('Play','it plays the id you just put above yay', function()
	local number = id:GetText()

	if getgenv().Dancing == true then
		getgenv.Dancing = false
	end
	
	local aaa = 'rbxassetid://' .. id:GetText()

	if (not getgenv().CloneRig) or game.Players.LocalPlayer.Character ~= getgenv().CloneRig then
		loadstring(game:HttpGet('https://raw.githubusercontent.com/Tescalus/Pendulum-Hubs-Source/main/ReanimMain.lua'))()
	end

	local NeededAssets = game:GetObjects(aaa)[1]
	local TweenService = game:GetService'TweenService'
	if game.Players.LocalPlayer.Character.Humanoid:FindFirstChild("Animator") then game.Players.LocalPlayer.Character.Humanoid.Animator:Destroy() end
	if game.Players.LocalPlayer.Character:FindFirstChild("Animate") then game.Players.LocalPlayer.Character:FindFirstChild("Animate"):Destroy() end
	local Joints = {
	["Torso"] = game.Players.LocalPlayer.Character.HumanoidRootPart["RootJoint"],
	["Right Arm"] =  game.Players.LocalPlayer.Character.Torso["Right Shoulder"],
	["Left Arm"] =  game.Players.LocalPlayer.Character.Torso["Left Shoulder"],
	["Head"] =  game.Players.LocalPlayer.Character.Torso["Neck"],
	["Left Leg"] =  game.Players.LocalPlayer.Character.Torso["Left Hip"],
	["Right Leg"] =  game.Players.LocalPlayer.Character.Torso["Right Hip"]
	}
	getgenv().dancing = true
	local speed = 1
	local keyframes = NeededAssets:GetKeyframes() -- get keyframes, this is better then getchildren bc it gets the correct order 
	repeat
		for ii,frame in pairs(keyframes) do -- for i,v on each keyframe to get each individual frame
	local duration = keyframes[ii+1] and keyframes[ii+1].Time - frame.Time or task.wait(1/120)
	print(tostring(duration))
	if keyframes[ii-1] then
	task.wait((frame.Time - keyframes[ii-1].Time)*speed)
	end
	for i,v in pairs(frame:GetDescendants()) do -- get each part in the frame
		if Joints[v.Name] then -- see if the part exists in the joint table
		TweenService:Create(Joints[v.Name],TweenInfo.new(duration*speed),{Transform = v.CFrame}):Play()
	end
	end
	end
	task.wait(1/120)
	until getgenv().dancing == false

end)

anim:NewButton('Stop','Stops the animation', function()
	if getgenv().dancing and getgenv().dancing == true then getgenv().dancing = false end
end)


-- Credits

CreditsTab:NewLabel("Credits to Tescalus#3758 for making the entire hub")
CreditsTab:NewLabel("Credits to padero#3957 for the Coffeeware tab")
CreditsTab:NewLabel("Ty ProductionTakeOne#3330 for help with new reanimation")
CreditsTab:NewLabel("Old ui was made by charli#4616")
CreditsTab:NewLabel("New ui was made by padero#3957")
CreditsTab:NewLabel("credit to skidagon for skidding this lol")


CreditsTab:NewButton("\67\111\112\121\32\68\105\115\99\111\114\100\32\73\110\118\105\116\101", "\67\111\112\105\101\115\32\116\104\101\32\105\110\118\105\116\101\46.", function()
	if setclipboard then
		setclipboard("\100\105\115\99\111\114\100\46\103\103\47\71\113\98\77\53\87\69\80\100\113")
	end
end)

-- Shift + L Hides Gui

local Enabled = true
UserInputService.InputBegan:Connect(function(Input,Typing)
	if Input.KeyCode == Enum.KeyCode.L and not Typing and UserInputService:IsKeyDown(Enum.KeyCode.LeftShift) then
		Enabled = not Enabled
		
		if Enabled == false then
			Pendulum:Hide()
		elseif Enabled == true then
			Pendulum:Show()
		end
	end
end)

Pendulum:SetMainTab(CreditsTab)
Pendulum:SetFooter('Current version: V5')
game:GetService("CoreGui"):WaitForChild("ScreenGui").Name = "Pendulum Hub"
local g=Instance.new("BlurEffect",game:service'Lighting')
g.Size=1;
spawn(function() 
	repeat task.wait() g.Size=g.Size+0.5 until g.Size==40
	wait(2)
	repeat task.wait() g.Size=g.Size-1 until g.Size==0
end)
spawn(function()
	local h=70;
	local i={FieldOfView=h-15}
	local j=TweenInfo.new(0.5,Enum.EasingStyle.Quad,Enum.EasingDirection.InOut)
	local k=game:GetService("TweenService"):Create(game.Workspace.CurrentCamera,j,i)
	k:Play()
	wait(3.5)
	game:GetService("TweenService"):Create(game.Workspace.CurrentCamera,j,{FieldOfView=h}):Play()
end)
